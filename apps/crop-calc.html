<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Crop Yield Calculator | FarmRPG Toolkit</title>
  <link rel="stylesheet" href="../assets/style.css">
  <script defer src="../assets/nav.js"></script>
</head>
<body>
  <main class="container">
    <div id="nav"></div>
    <div class="title-row">
      <span style="font-size:1.7em;margin-right:8px;">ðŸŒ½</span>
      <h1>Crop Yield Calculator</h1>
      <span style="font-size:1.7em;margin-left:8px;">ðŸŒ½</span>
    </div>
    <section class="card info">
      <button id="expandInfo" class="expand-info-btn" aria-expanded="false" aria-controls="infoContent" type="button">
        <span class="expand-label">How does this calculator work?</span>
        <span class="expand-arrow">&#9660;</span>
      </button>
      <div id="infoContent" class="info-content" style="display:none;">
        <ul>
          <li>Enter the number of <strong>Crop Spaces</strong> you have available for planting.</li>
          <li>Set the number of <strong>Harvests</strong> you want to calculate for. For example, if you have 10 grape juice to use, enter 10 here.</li>
          <li>Enter how many <strong>Regular Seeds</strong> and <strong>Mega Seeds</strong> you will plant. The total must not exceed your crop spaces.</li>
          <li>Select how many <strong>Cookie Types</strong> you will eat before harvesting. More types give a higher yield multiplier.</li>
          <li>If you have the <strong>Double Prizes I</strong> and/or <strong>Double Prizes II</strong> perks, check the boxes to include their effects.</li>
        </ul>
        <p>The calculator will show your average crops per harvest and the total for all harvests, factoring in all bonuses.</p>
        <p><strong>Tip:</strong> Mega Seeds give 10x yield per seed. Double Prizes perks give a chance for each seed to yield double crops, and cookies multiply your total yield.</p>
      </div>
    </section>
    <section class="card inputs">
      <h2>Inputs</h2>
      <form id="yield-form" autocomplete="off">
        <div class="row-group">
          <div class="input-group half-width">
            <label for="cropSpaces">Crop Spaces</label>
            <input type="number" id="cropSpaces" name="cropSpaces" min="1" step="1" value="48">
          </div>
          <div class="input-group half-width">
            <label for="harvests">Harvests</label>
            <input type="number" id="harvests" name="harvests" min="1" step="1" value="1">
          </div>
        </div>
        <div class="row-group">
          <div class="input-group half-width">
            <label for="regularSeeds">Regular Seeds</label>
            <input type="number" id="regularSeeds" name="regularSeeds" min="0" step="1" value="48">
          </div>
          <div class="input-group half-width">
            <label for="megaSeeds">Mega Seeds</label>
            <input type="number" id="megaSeeds" name="megaSeeds" min="0" step="1" value="0">
          </div>
        </div>
        <div id="seed-warning" style="display:none;margin-bottom:10px;" class="explore-warning"></div>
        <div class="row-group">
          <div class="input-group half-width">
            <label for="cookieTypes">Number of Cookie Types Eaten</label>
            <select id="cookieTypes" name="cookieTypes" style="width:100%;padding:7px 10px;border:1.5px solid #d1d5db;border-radius:7px;font-size:1rem;background:#f8fafc;">
              <option value="0">0 (No cookies, 1x yield)</option>
              <option value="1">1 (3x yield)</option>
              <option value="2">2 (6x yield)</option>
              <option value="3">3 (9x yield)</option>
            </select>
          </div>
        </div>
        <div class="row-group">
          <div class="input-group" style="width:100%;">
            <div style="font-size:1.18em;font-weight:600;margin-bottom:8px;">Perks</div>
            <label for="doublePrizes1" style="display:flex;align-items:center;gap:8px;margin-bottom:4px;">
              <input type="checkbox" id="doublePrizes1" name="doublePrizes1">
              Double Prizes I <span style="color:#888;">(15% chance of double crops)</span>
            </label>
            <label for="doublePrizes2" style="display:flex;align-items:center;gap:8px;">
              <input type="checkbox" id="doublePrizes2" name="doublePrizes2">
              Double Prizes II <span style="color:#888;">(25% chance of double crops)</span>
            </label>
          </div>
        </div>
      </form>
    </section>
    <section class="card results">
      <h2>Results</h2>
      <!-- Results will be displayed here -->
    </section>
    <footer>
      <small>All calculations are performed locally in your browser.<br>
      <span style="color:#888;">FarmRPG Toolkit is an independent fan project and is not affiliated with FarmRPG or its creators.</span></small>
    </footer>
  </main>
  <script type="module" src="crop-calc.js"></script>
  <script>
    const expandInfo = document.getElementById('expandInfo');
    const infoContent = document.getElementById('infoContent');
    expandInfo.addEventListener('click', () => {
      const expanded = expandInfo.getAttribute('aria-expanded') === 'true';
      expandInfo.setAttribute('aria-expanded', !expanded);
      infoContent.style.display = expanded ? 'none' : 'block';
      expandInfo.querySelector('.expand-arrow').innerHTML = expanded ? '&#9660;' : '&#9650;';
    });
  </script>
</body>
</html>
